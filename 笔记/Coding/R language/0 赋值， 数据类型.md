
# 1 赋值

R赋值语法：
变量名称 <- 赋值内容

```R
rwkk <- "Nice R"
rwkk
---
[1] "Nice R"
```

```R
rm(object) # 清除单个变量

rm(list = ls()) # 清除所有变量

gc() # Free unused R memory

# Note: Ctrl + L可以清屏
```

# 2 储存资料的物件

R语言是物件导向为主的程式语言(Object-Oriented Programming Language), 在R中，储存的资料或可执行的函数，都称为物件 (object)；  
储存资料这些物件基本由：向量(vector)，资料框(data frames)，矩阵(matrix)，与列表 (Lists)组成：

![[../../assets/Coding/Objects.png|650]]

## 2.1 Vector
==Vector是R语言中最核心的数据类型==，内部为一组**同类型的数据** 

```R
height <- c(155, 170, 160, 186, 190) {都是数字类型}
height
---
[1] 155 170 160 186 190

若是不同类型时
eg:
mix <- c(4.0, "Lance") {数字+字符串}
mix
## [1] "4" "Lance"
输出全为字符类型
```

```R
logic_vec <- c(TRUE, FALSE) ##逻辑型类
logic_vec
---
[1] TRUE FALSE
```

 其中 c() 指combine 代表打包；

**Note:**
冒号。如5: 10，就会输出5到10的所有自然数。
eg: num <- 100:1000

我们还可以用 = 来命名为矢量中的值: 
```R
my_vec <- c("a" = 1, "d" = 3, "b" = 2) 
my_vec
---
a d b 
1 3 2 
```

## Splicing

```R
vector_name[index]

eg: 
hight[3]
---
[1] 160

选中多个element也是可以的，
eg: height[c(1, 3)]

不选中，可以用[-index]来表达
eg: height[-c(1, 3)] or height[c(-1, -3)]

选择范围
eg: height[c(1:4)]

选择一定值的范围
eg: height[height>165&height<190]
```

## 2.2 Matrix

```R
vec <- 1:9
mat1 <- matrix(vec, ncol=3, nrow=3)
其中，matrix是用来新建matrix的function，vec是我们扔进去的vector，ncol和nrow分别定义了有多少行，有多少列。

---
mat1
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
```

Note: t()方法（内置） 可以翻转行列:      
![](https://www.runoob.com/wp-content/uploads/2020/07/Matrix_transpose.gif)
```{r}
print(t(mydataframe))
```

### Splicing
同样使用[ ]完成
```R
mat1[rownumber, colnumber]

只选某一行或者某一列也可以
mat1[3， ]
mat1[， 1]

多行，多列
mat1[c(1, 3)， ]
mat1[， c(1, 3)]

-号代表不选择
mat1[, -1]

```

## 2.3 Data Frame

使用最多，在R语言里，Data Frame 是Vector 竖直拼接的结果。
R当中，自带了几个data frame：iris，mtcars等
```R
iris
---
    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
1            5.1         3.5          1.4         0.2     setosa
2            4.9         3.0          1.4         0.2     setosa
3            4.7         3.2          1.3         0.2     setosa
4            4.6         3.1          1.5         0.2     setosa
5            5.0         3.6          1.4         0.2     setosa
6            5.4         3.9          1.7         0.4     setosa
7            4.6         3.4          1.4         0.3     setosa
8            5.0         3.4          1.5         0.2     setosa
9            4.4         2.9          1.4         0.2     setosa
10           4.9         3.1          1.5         0.1     setosa
```
对于data frame而言，每一列都是一个vector，所以其中的数据都是同类型的。然而也只要求*每列同类型*，一行内可以出现不同的类型。

要**创建DF**，需使用函数：data.frame(...)
首先确定数据框里面的列有哪些，然后调用函数 data.frame() 
```R
C1 <- c(1,2,3,4)
C2 <- c(5,6,7,8)
C3 <- c(9,10,11,12)
C4 <- c(13,14,15,16)
C5 <- c(17,18,19,20)
mydataframe <- data.frame(C1,C2,C3,C4,C5,row.names = c("R1","R2","R3","R4"))
mydataframe
---
   C1 C2 C3 C4 C5
R1  1  5  9 13 17
R2  2  6 10 14 18
R3  3  7 11 15 19
R4  4  8 12 16 20
```

### Splicing
```R
dataframe[rownumber, colnumber]
#参考中文的”十“，写法是先横后竖，[]的数字也是一样，先行后列

#只选某一行或者某一列也可以
iris[3， ]
iris[， 1]

#多行，多列
iris[c(1, 3)， ]
iris[， c(1, 3)]

#-号代表不选择
iris[, -1]

还可以用列名来选择这一列。
比如，如果想选中iris里的第一列，除了iris[, 1]之外，还可以使用：
iris$Sepal.Length

延伸出另一种选择的方式：
iris$Sepal.Length[3] 可以选择该列的第三个值

```

### 添加列
```R
x<-data.frame(apple=c(1,4,2,3),pear=c(4,8,5,2))
x
---
  apple pear
1     1    4
2     4    8
3     2    5
4     3    2

x$banana<-c(9,5,6,2)
x

##
  apple pear banana
1     1    4      9
2     4    8      5
3     2    5      6
4     3    2      2
```

## 2.4 List

最大的类型，可以强行组成创建四个成份的列表：字符串、数值型向量、矩阵以及字符型向量。组合可以任意，最后保存为列表。
```R
g <- "My First List"
h <- c(25,26,18,39)
j <- matrix(1:10, nrow = 5)
k <- c("one","two","three")
mylist <- list(title=g,ages=h,j,k)
mylist$title
---
[1] "My First List"

mylist$ages
---
[1] 25 26 18 39
```

### 单双括号？
单中括号和双中括号，作用都是 “提取”，当从一个向量或矩阵中提取第元素时，两者结果相同：
```R
v <- c(2,4,6,8,10)
aaa[5]
---
[1] 10

aaa[[5]]
---
[1] 10
```

[ ] extracts a list, [ [  ] ]extracts elements within the list
The [ [  ] ] form allows only a single element to be selected using integer or character indices, whereas [ ] allows indexing by vectors.
```R
> mylist[3]
---
[[1]]
     [,1] [,2]
[1,]    1    6
[2,]    2    7
[3,]    3    8
[4,]    4    9
[5,]    5   10

> mylist[[3]]
---
     [,1] [,2]
[1,]    1    6
[2,]    2    7
[3,]    3    8
[4,]    4    9
[5,]    5   10

结果很像，但是数据类型不一样
```

另外一点是 [[ ]] 可以通过参数 “exact” 激活模糊匹配：
```R
li <- list(name='yiifaa', age=35) # 从list提取元素用[[]]
li[['nam', exact = FALSE]] # 模糊匹配到name
---
[1] "yiifaa"
```